

-- 테이블
DROP TABLE MEMBER CASCADE CONSTRAINTS;
CREATE TABLE MEMBER (
-- 공통
ID VARCHAR2(50) NOT NULL PRIMARY KEY,
PASSWORD VARCHAR2(16) NOT NULL,
PHONE VARCHAR2(11) NULL,
PRIVILEAGE NUMBER(1) NULL,
-- 일반
NICKNAME VARCHAR2(30) NULL UNIQUE,
REGION VARCHAR2(100) NULL,
DATETIME DATE NULL,
POINT NUMBER(5) NULL,
-- 상담사
NAME VARCHAR2(21) NULL,
ZIPCODE VARCHAR2(6) NULL,
ADDRESS1 VARCHAR2(300) NULL,
ADDRESS2 VARCHAR2(300) NULL,
ADDRESS3 VARCHAR2(100) NULL,
JOB VARCHAR2(100) NULL,
INTRODUCTION VARCHAR2(300) NULL
);

DROP TABLE MESSAGE CASCADE CONSTRAINTS;
CREATE TABLE MESSAGE (
ID NUMBER(5) NOT NULL PRIMARY KEY,
SENDER VARCHAR2(50) NULL REFERENCES MEMBER(ID) ON DELETE SET NULL,
RECIEVER VARCHAR2(50) NULL REFERENCES MEMBER(ID) ON DELETE SET NULL,
CONTENT VARCHAR2(500) NOT NULL,
DATETIME DATE DEFAULT SYSDATE
);

DROP TABLE CHALLENGE CASCADE CONSTRAINTS;
CREATE TABLE CHALLENGE (
ID NUMBER(5) NOT NULL PRIMARY KEY,
CONTENT VARCHAR2(100) NOT NULL,
REWARD NUMBER(3) NOT NULL
);

DROP TABLE DAILY_LOG CASCADE CONSTRAINTS;
CREATE TABLE DAILY_LOG (
ID NUMBER(5) NOT NULL PRIMARY KEY,
MEMBER_ID VARCHAR2(50) NOT NULL REFERENCES MEMBER(ID) ON DELETE CASCADE,
DATETIME DATE DEFAULT SYSDATE,
SLEEP NUMBER(2) NULL,
MEDICINE NUMBER(1) NULL
);

DROP TABLE MOOD_STATE CASCADE CONSTRAINTS;
CREATE TABLE MOOD_STATE (
ID NUMBER(5) NOT NULL PRIMARY KEY,
MEMBER_ID VARCHAR2(50) NOT NULL REFERENCES MEMBER(ID) ON DELETE CASCADE,
DATETIME DATE DEFAULT SYSDATE,
STATE NUMBER(3) NOT NULL
);

DROP TABLE TEST_RESULT CASCADE CONSTRAINTS;
CREATE TABLE TEST_RESULT (
ID NUMBER(5) NOT NULL PRIMARY KEY,
MEMBER_ID VARCHAR2(50) NOT NULL REFERENCES MEMBER(ID) ON DELETE CASCADE,
DATETIME DATE DEFAULT SYSDATE,
RESULT NUMBER(2) NOT NULL
);

DROP TABLE POST CASCADE CONSTRAINTS;
CREATE TABLE POST (
ID NUMBER(5) NOT NULL PRIMARY KEY,
MEMBER_ID VARCHAR2(50) NULL REFERENCES MEMBER(ID) ON DELETE SET NULL,
CATEGORY VARCHAR2(30) NOT NULL,
TITLE VARCHAR2(100) NULL,
CONTENT VARCHAR2(500) NOT NULL,
DATETIME DATE DEFAULT SYSDATE,
REPLIES NUMBER(5) DEFAULT 0,
LIKES NUMBER(5) DEFAULT 0,
VIEWS NUMBER(5) DEFAULT 0
);

DROP TABLE REPLY CASCADE CONSTRAINTS;
CREATE TABLE REPLY (
ID NUMBER(5) NOT NULL PRIMARY KEY,
MEMBER_ID VARCHAR2(50) NULL REFERENCES MEMBER(ID) ON DELETE SET NULL,
POST_ID NUMBER(5) NOT NULL REFERENCES POST(ID) ON DELETE CASCADE,
CONTENT VARCHAR2(100) NOT NULL,
DATETIME DATE DEFAULT SYSDATE,
LIKES NUMBER(5) DEFAULT 0
);

DROP TABLE LIKER CASCADE CONSTRAINTS;
CREATE TABLE LIKER (
ID NUMBER(5) NOT NULL PRIMARY KEY,
MEMBER_ID VARCHAR2(50) NOT NULL REFERENCES MEMBER(ID) ON DELETE CASCADE,
POST_ID NUMBER(5) NULL REFERENCES POST(ID) ON DELETE CASCADE,
REPLY_ID NUMBER(5) NULL REFERENCES REPLY(ID) ON DELETE CASCADE
);

DROP TABLE ITEM CASCADE CONSTRAINTS;
CREATE TABLE ITEM (
ID NUMBER(2) NOT NULL PRIMARY KEY,
CATEGORY VARCHAR2(30) NOT NULL,
NAME VARCHAR2(50) NOT NULL,
PRICE NUMBER(3) NOT NULL
);

DROP TABLE MY_ITEM CASCADE CONSTRAINTS;
CREATE TABLE MY_ITEM (
ID NUMBER(5) NOT NULL PRIMARY KEY,
MEMBER_ID VARCHAR2(50) NOT NULL REFERENCES MEMBER(ID) ON DELETE CASCADE,
ITEM_ID NUMBER(2) NOT NULL REFERENCES ITEM(ID) ON DELETE CASCADE,
WISH NUMBER(1) DEFAULT 0
);

DROP TABLE MY_ROOM CASCADE CONSTRAINTS;
CREATE TABLE MY_ROOM (
ID NUMBER(5) NOT NULL PRIMARY KEY,
MEMBER_ID VARCHAR2(50) NOT NULL REFERENCES MEMBER(ID) ON DELETE CASCADE,
FLOOR NUMBER(2) NULL REFERENCES ITEM(ID) ON DELETE SET NULL,
WALLPAPER NUMBER(2) NULL REFERENCES ITEM(ID) ON DELETE SET NULL,
BED NUMBER(2) NULL REFERENCES ITEM(ID) ON DELETE SET NULL,
CLOSET NUMBER(2) NULL REFERENCES ITEM(ID) ON DELETE SET NULL,
DESK NUMBER(2) NULL REFERENCES ITEM(ID) ON DELETE SET NULL,
WALLDECO NUMBER(2) NULL REFERENCES ITEM(ID) ON DELETE SET NULL
);


-- 시퀀스
DROP SEQUENCE SEQ_MESSAGE;
CREATE SEQUENCE SEQ_MESSAGE START WITH 1 INCREMENT BY 1;
DROP SEQUENCE SEQ_CHALLEGE;
CREATE SEQUENCE SEQ_CHALLEGE START WITH 1 INCREMENT BY 1;
DROP SEQUENCE SEQ_DAILY_LOG;
CREATE SEQUENCE SEQ_DAILY_LOG START WITH 1 INCREMENT BY 1;
DROP SEQUENCE SEQ_MOOD_STATE;
CREATE SEQUENCE SEQ_MOOD_STATE START WITH 1 INCREMENT BY 1;
DROP SEQUENCE SEQ_TEST_RESULT;
CREATE SEQUENCE SEQ_TEST_RESULT START WITH 1 INCREMENT BY 1;
DROP SEQUENCE SEQ_POST;
CREATE SEQUENCE SEQ_POST START WITH 1 INCREMENT BY 1;
DROP SEQUENCE SEQ_REPLY;
CREATE SEQUENCE SEQ_REPLY START WITH 1 INCREMENT BY 1;
DROP SEQUENCE SEQ_LIKER;
CREATE SEQUENCE SEQ_LIKER START WITH 1 INCREMENT BY 1;
DROP SEQUENCE SEQ_ITEM;
CREATE SEQUENCE SEQ_ITEM START WITH 1 INCREMENT BY 1;
DROP SEQUENCE SEQ_MY_ITEM;
CREATE SEQUENCE SEQ_MY_ITEM START WITH 1 INCREMENT BY 1;
DROP SEQUENCE SEQ_MY_ROOM;
CREATE SEQUENCE SEQ_MY_ROOM START WITH 1 INCREMENT BY 1;


