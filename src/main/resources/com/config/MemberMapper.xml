<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.config.MemberMapper">

	<!-- 로그인 -->
	<select id="selectMember" parameterType="hashmap" resultType="MemberDTO">
	<![CDATA[
		SELECT * FROM member
		WHERE id = #{id} AND password = #{password}
	]]>
	</select>
	
	<!-- 아이디 중복 체크 -->
	<select id="checkId" parameterType="String" resultType="int">
	<![CDATA[
        SELECT COUNT(*)
        FROM member
        WHERE id = #{id}
      ]]>
    </select>
    
    <!-- 닉네임 중복 체크 -->
	<select id="checkNickname" parameterType="String" resultType="int">
	<![CDATA[
        SELECT COUNT(*)
        FROM member
        WHERE nickname = #{nickname}
    ]]>
    </select>
    
    <!-- 일반회원가입 -->
    <insert id="generalSignUp" parameterType="MemberDTO">
   	<![CDATA[
		INSERT	INTO member (id, password, phone, privileage, nickname, region)
		VALUES (#{id},#{password},#{phone},3,#{nickname},#{region})
	]]>
	</insert>
	
	<!-- 상담사회원가입 -->
    <insert id="counselorSignUp" parameterType="MemberDTO">
   	<![CDATA[
		INSERT	INTO member (id, password, phone, privileage, name, zipcode, address1, address2, address3, job, introduction)
		VALUES (#{id},#{password},#{phone},2,#{name},#{zipcode},#{address1},#{address2},#{address3},#{job},#{introduction})
	]]>
	</insert>
	
	<!-- id로 회원 찾기 -->
	<select id="selectById" parameterType="string" resultType="MemberDTO">
	<![CDATA[
		SELECT * 
		FROM member
		WHERE id = #{id}
	]]>
	</select>
	
	<!-- 새 비밀번호 설정 -->
	<update id="newPw" parameterType="MemberDTO">
	<![CDATA[
		UPDATE member
		SET password = #{password}
		WHERE id = #{id}
	]]>
	</update>

</mapper>