-- 회원
DROP TABLE MEMBER CASCADE CONSTRAINTS;
CREATE TABLE MEMBER (
	ID NUMBER(5) NOT NULL PRIMARY KEY,
	EMAIL VARCHAR2(50) NOT NULL UNIQUE,
	PASSWORD VARCHAR2(16) NOT NULL,
	PRIVILEGE NUMBER(1) NOT NULL,
	NAME VARCHAR2(30) NOT NULL,
	PHONE VARCHAR2(11) NOT NULL,

	REGION VARCHAR2(100) NULL,
	DATETIME DATE NULL,
	POINT NUMBER(5) NULL,

	ZIPCODE VARCHAR2(6) NULL,
	ADDRESS1 VARCHAR2(300) NULL,
	ADDRESS2 VARCHAR2(300) NULL,
	ADDRESS3 VARCHAR2(100) NULL,
	JOB VARCHAR2(100) NULL,
	INTRODUCTION VARCHAR2(300) NULL
);
DROP SEQUENCE SEQ_MEMBER;
CREATE SEQUENCE SEQ_MEMBER START WITH 1 INCREMENT BY 1;



-- 커뮤니티
-- 게시글
DROP TABLE POST CASCADE CONSTRAINTS;
CREATE TABLE POST (
	ID NUMBER(5) NOT NULL PRIMARY KEY,
	MEMBER_ID NUMBER(5) NOT NULL,
	MEMBER_NAME VARCHAR(30) NULL,
	CATEGORY VARCHAR2(30) NOT NULL,
	TITLE VARCHAR2(100) NULL,
	CONTENT VARCHAR2(500) NOT NULL,
	DATETIME DATE DEFAULT CURRENT_DATE NOT NULL,
	REPLIES NUMBER(5) DEFAULT 0 NOT NULL,
	LIKES NUMBER(5) DEFAULT 0 NOT NULL,
	VIEWS NUMBER(5) DEFAULT 0 NOT NULL
);
DROP SEQUENCE SEQ_POST;
CREATE SEQUENCE SEQ_POST START WITH 1 INCREMENT BY 1;

-- 댓글
DROP TABLE REPLY CASCADE CONSTRAINTS;
CREATE TABLE REPLY (
	ID NUMBER(5) NOT NULL PRIMARY KEY,
	MEMBER_ID NUMBER(5) NOT NULL,
	MEMBER_NAME VARCHAR(30) NULL,
	POST_ID NUMBER(5) NOT NULL REFERENCES POST(ID) ON DELETE CASCADE,
	CONTENT VARCHAR2(100) NOT NULL,
	DATETIME DATE DEFAULT CURRENT_DATE NOT NULL,
	LIKES NUMBER(5) DEFAULT 0 NOT NULL
);
DROP SEQUENCE SEQ_REPLY;
CREATE SEQUENCE SEQ_REPLY START WITH 1 INCREMENT BY 1;

-- 추천인
DROP TABLE LIKER CASCADE CONSTRAINTS;
CREATE TABLE LIKER (
	ID NUMBER(5) NOT NULL PRIMARY KEY,
	MEMBER_ID NUMBER(5) NOT NULL,
	POST_ID NUMBER(5) NULL REFERENCES POST(ID) ON DELETE CASCADE,
	REPLY_ID NUMBER(5) NULL REFERENCES REPLY(ID) ON DELETE CASCADE
);
DROP SEQUENCE SEQ_LIKER;
CREATE SEQUENCE SEQ_LIKER START WITH 1 INCREMENT BY 1;



-- 쪽지
DROP TABLE MESSAGE CASCADE CONSTRAINTS;
CREATE TABLE MESSAGE (
	ID NUMBER(5) NOT NULL PRIMARY KEY,
	SENDER_ID NUMBER(5) NOT NULL,
	SENDER_NAME VARCHAR2(30) NULL,
	SENDER_PRIVILEGE NUMBER(1) NOT NULL,
	RECIEVER_ID NUMBER(5) NOT NULL,
	RECIEVER_NAME VARCHAR2(30) NULL,
	RECIEVER_PRIVILEGE NUMBER(1) NOT NULL,
	DATETIME DATE DEFAULT CURRENT_DATE NOT NULL,
	CONTENT VARCHAR2(500) NOT NULL
);
DROP SEQUENCE SEQ_MESSAGE;
CREATE SEQUENCE SEQ_MESSAGE START WITH 1 INCREMENT BY 1;



-- 미니룸
-- 아이템
DROP TABLE ITEM CASCADE CONSTRAINTS;
CREATE TABLE ITEM (
	ID NUMBER(2) NOT NULL PRIMARY KEY,
	CATEGORY VARCHAR2(30) NOT NULL,
	NAME VARCHAR2(50) NOT NULL,
	PRICE NUMBER(3) NOT NULL
);
DROP SEQUENCE SEQ_ITEM;
CREATE SEQUENCE SEQ_ITEM START WITH 1 INCREMENT BY 1;

-- 마이아이템
DROP TABLE MY_ITEM CASCADE CONSTRAINTS;
CREATE TABLE MY_ITEM (
	ID NUMBER(5) NOT NULL PRIMARY KEY,
	MEMBER_ID NUMBER(5) NOT NULL REFERENCES MEMBER(ID) ON DELETE CASCADE,
	ITEM_ID NUMBER(2) NOT NULL REFERENCES ITEM(ID) ON DELETE CASCADE,
	WISH NUMBER(1) NOT NULL
);
DROP SEQUENCE SEQ_MY_ITEM;
CREATE SEQUENCE SEQ_MY_ITEM START WITH 1 INCREMENT BY 1;

-- 마이룸
DROP TABLE MY_ROOM CASCADE CONSTRAINTS;
CREATE TABLE MY_ROOM (
	ID NUMBER(5) NOT NULL PRIMARY KEY,
	MEMBER_ID NUMBER(5) NOT NULL REFERENCES MEMBER(ID) ON DELETE CASCADE,
	MEMBER_NAME VARCHAR(30) NOT NULL,
	FLOOR NUMBER(2) NULL REFERENCES ITEM(ID) ON DELETE SET NULL,
	WALLPAPER NUMBER(2) NULL REFERENCES ITEM(ID) ON DELETE SET NULL,
	BED NUMBER(2) NULL REFERENCES ITEM(ID) ON DELETE SET NULL,
	CLOSET NUMBER(2) NULL REFERENCES ITEM(ID) ON DELETE SET NULL,
	DESK NUMBER(2) NULL REFERENCES ITEM(ID) ON DELETE SET NULL,
	WALLDECO NUMBER(2) NULL REFERENCES ITEM(ID) ON DELETE SET NULL
);
DROP SEQUENCE SEQ_MY_ROOM;
CREATE SEQUENCE SEQ_MY_ROOM START WITH 1 INCREMENT BY 1;



-- 테스트결과
DROP TABLE TEST_RESULT CASCADE CONSTRAINTS;
CREATE TABLE TEST_RESULT (
	ID NUMBER(5) NOT NULL PRIMARY KEY,
	MEMBER_ID NUMBER(5) NOT NULL REFERENCES MEMBER(ID) ON DELETE CASCADE,
	DATETIME DATE DEFAULT CURRENT_DATE NOT NULL,
	TYPE NUMBER(1) NOT NULL,
	RESULT NUMBER(2) NOT NULL
);
DROP SEQUENCE SEQ_TEST_RESULT;
CREATE SEQUENCE SEQ_TEST_RESULT START WITH 1 INCREMENT BY 1;



-- 노랑이
-- 일일데이터
DROP TABLE DAILY_LOG CASCADE CONSTRAINTS;
CREATE TABLE DAILY_LOG (
	ID NUMBER(5) NOT NULL PRIMARY KEY,
	MEMBER_ID NUMBER(5) NOT NULL REFERENCES MEMBER(ID) ON DELETE CASCADE,
	DATETIME DATE DEFAULT CURRENT_DATE NOT NULL,
	SLEEP NUMBER(2) NULL,
	MEDICINE NUMBER(1) NULL
);
DROP SEQUENCE SEQ_DAILY_LOG;
CREATE SEQUENCE SEQ_DAILY_LOG START WITH 1 INCREMENT BY 1;

-- 기분상태
DROP TABLE MOOD_STATE CASCADE CONSTRAINTS;
CREATE TABLE MOOD_STATE (
	ID NUMBER(5) NOT NULL PRIMARY KEY,
	MEMBER_ID NUMBER(5) NOT NULL REFERENCES MEMBER(ID) ON DELETE CASCADE,
	DATETIME DATE DEFAULT CURRENT_DATE NOT NULL,
	STATE NUMBER(3) NOT NULL
);
DROP SEQUENCE SEQ_MOOD_STATE;
CREATE SEQUENCE SEQ_MOOD_STATE START WITH 1 INCREMENT BY 1;

-- 챌린지
DROP TABLE CHALLENGE CASCADE CONSTRAINTS;
CREATE TABLE CHALLENGE (
	ID NUMBER(5) NOT NULL PRIMARY KEY,
	CONTENT VARCHAR2(100) NOT NULL,
	REWARD NUMBER(3) NOT NULL
);
DROP SEQUENCE SEQ_CHALLEGE;
CREATE SEQUENCE SEQ_CHALLEGE START WITH 1 INCREMENT BY 1;